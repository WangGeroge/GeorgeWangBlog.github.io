{"title":"hexo_inside博客主题优化","date":"2019-12-10T13:10:31.000Z","date_formatted":{"ll":"2019年12月10日","L":"2019/12/10","MM-DD":"12-10"},"link":"2019/12/10/hexo-inside博客主题优化","comments":true,"tags":["hexo主题优化"],"updated":"2020-08-03T06:53:59.660Z","content":"<h3 id=\"Hexo-inside主题优化\">Hexo inside主题优化<a href=\"2019/12/10/hexo-inside博客主题优化#Hexo-inside主题优化\"></a></h3><p><code>hexo inside 优化</code></p>\n<hr>\n<h4 id=\"hexo系列问题\">hexo系列问题<a href=\"2019/12/10/hexo-inside博客主题优化#hexo系列问题\"></a></h4><h6 id=\"※-部署到github时会删掉README文件\">※ 部署到github时会删掉README文件<a href=\"2019/12/10/hexo-inside博客主题优化#※-部署到github时会删掉README文件\"></a></h6><p>​    △ 分析：</p>\n<blockquote>\n<p> ① 执行<code>hexo g</code>后，会把source文件里的.md格式的文件渲染为html文件并放到public下面；</p>\n<p> ② 继续执行<code>hexo d</code>后，会将public下面的所有文件提交到对应的XXX.github.io仓库中；</p>\n<p> ③ 由于本地public文件夹无README.md文件，在提交public文件时，github会认为你把README.md文件      删掉了，同时github也会删掉仓库里的README.md文件</p>\n</blockquote>\n<p>   △ 解决：</p>\n<blockquote>\n<p>① 在本地source文件夹内创建一个 README.md</p>\n<p>② 修改Hexo根目录下的_config.yml文件，将skip_render参数的值设置为README.md</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">skip_render:</span> <span class=\"string\">README.md</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">2</span></pre></td><td class=\"code\"><pre><span class=\"line\"></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">3</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span>  <span class=\"string\">为什么需要设置这一步呢？</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">4</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span>  <span class=\"string\">因为你执行hexo</span> <span class=\"string\">g命令时，hexo会默认将source文件里的所有md文件渲染为html文件放到public中，</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">5</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span>  <span class=\"string\">同时README.md会被渲染为README.html文件放到public文件里</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">6</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">//</span>  <span class=\"string\">加上这段设置，就是告诉hexo的解析器，你在渲染source文件里的md文件时，跳过README.md文件</span></span></pre></td></tr></table></div></figure>\n</blockquote>\n<h4 id=\"Inside主题改造\">Inside主题改造<a href=\"2019/12/10/hexo-inside博客主题优化#Inside主题改造\"></a></h4><h6 id=\"※-博客头像、简介、目录、链接、搜索、主题、字体、加载速度、评论、访问量\">※ 博客头像、简介、目录、链接、搜索、主题、字体、加载速度、评论、访问量<a href=\"2019/12/10/hexo-inside博客主题优化#※-博客头像、简介、目录、链接、搜索、主题、字体、加载速度、评论、访问量\"></a></h6><p><code>config.yml文件改造</code></p>\n<p>​    △ 头像设置</p>\n<blockquote>\n<p>① 在当前主题中source创建img文件夹，将自己头像照片存放到文件夹中</p>\n<p>② 在主题配置文件 _config.yml 文件，设置以下值：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 头像url</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">2</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">avatar:</span> <span class=\"string\">/img/avatar.jpg</span> </span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">3</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">favicon:</span> <span class=\"string\">/img/avatar.jpg</span></span></pre></td></tr></table></div></figure>\n</blockquote>\n<p>​    △ 目录设置</p>\n<p>  △ 设置添加rss ,github等链接</p>\n<blockquote>\n<p>① 在目录下执行安装hexo插件</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-generator-feed</span></pre></td></tr></table></div></figure>\n\n<p>② 在config.yml文件中添加插件信息</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Extensions</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">2</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## Plugins: http://hexo.io/plugins/</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">3</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span> <span class=\"string\">hexo-generate-feed</span></span></pre></td></tr></table></div></figure>\n\n<p>③ 在theme目录下的config.yml文件中添加rss配置</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Set rss to false to disable feed link.</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">2</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Leave rss as empty to use site's feed link.</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">3</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Set rss to specific value if you have burned your feed already.</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">4</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">rss:</span> <span class=\"string\">/atom.xml</span></span></pre></td></tr></table></div></figure>\n\n<p>④ 重新部署</p>\n</blockquote>\n<p>  △ 设置打赏模块</p>\n<blockquote>\n<p>1、下载微信，支付宝的支付图片</p>\n<p>2、将图片放入主题的img文件夹中</p>\n<p>3、设置相应的属性，具体如下：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">reward:</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">2</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># Text which shows at the top.</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">3</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># 显示一句文案</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">4</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"attr\">text:</span>  <span class=\"string\">交个朋友啦</span> <span class=\"string\">☕</span> <span class=\"string\">.</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">5</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># wechatpay: /img/Wechat.jpg</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">6</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># alipay: /img/Alipy.jpg</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">7</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># Payment Methods</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">8</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># 支付方式列表，注意是数组</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">9</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># qrcode, url and text must be set at least one</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">10</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># wechat, alipay, paypal and bitcoin has a built-in icon,</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">11</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\"># use `name` to apply</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">12</span></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"attr\">methods:</span> </span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">13</span></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\"># wechat、alipay、paypal、bitcoin 对应四种不同的图标和配色</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">14</span></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\"># 此外的任何自定义名称，都需要在语言文件内增加相应的语言，</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">15</span></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"comment\"># 同时配色与 appearance.accent_color 一致</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">16</span></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">wechat</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">17</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># 二维码地址</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">18</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"attr\">qrcode:</span> <span class=\"string\">img/Wechat.jpg</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">19</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># 显示一个链接</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">20</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"attr\">url:</span> <span class=\"string\">/img/Wechat.jpg</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">21</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># 若设置了 url，则此值会显示为链接的文本，否则为一段普通文本</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">22</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"attr\">text:</span> <span class=\"string\">🤝微信🤝</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">23</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># 选中时的颜色</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">24</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"attr\">color:</span> <span class=\"string\">'#33CC00'</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">25</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># qrcode、url 和 text 必须至少设置一项</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">26</span></pre></td><td class=\"code\"><pre><span class=\"line\"></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">27</span></pre></td><td class=\"code\"><pre><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">alipay</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">28</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># 二维码地址</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">29</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"attr\">qrcode:</span> <span class=\"string\">img/Alipy.jpg</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">30</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># 显示一个链接</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">31</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"attr\">url:</span> <span class=\"string\">/img/Alipy.jpg</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">32</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># 若设置了 url，则此值会显示为链接的文本，否则为一段普通文本</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">33</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"attr\">text:</span> <span class=\"string\">🤝支付宝🤝</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">34</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"comment\"># 选中时的颜色</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">35</span></pre></td><td class=\"code\"><pre><span class=\"line\">      <span class=\"attr\">color:</span> <span class=\"string\">'#00CCFF'</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">36</span></pre></td><td class=\"code\"><pre><span class=\"line\"></span></pre></td></tr></table></div></figure>\n\n<p>注：当前的name中的，需要小写，是内置支付方式</p>\n</blockquote>\n<p>  △ 设置统计字数，访问量</p>\n<blockquote>\n<p>问题思考：如何添加js引用</p>\n<p>统计使用<strong>“不蒜子”</strong></p>\n<p>如何处理hexo inside主题布局修改问题</p>\n<p>分析：inside主题是通过AngularJS实现</p>\n<p>① 通过vscode将inside文件夹打开</p>\n<p>② 分析layout文件夹</p>\n<p>通过分析研究 _config.xml 将相关不蒜子统计文件js配置处理添加到文件中</p>\n<p><strong>1、先进行脚本的安装，再使用不蒜子的页面</strong></p>\n<p>安装方法：主题_config.xml配置文件 plugins 模块 插入 busuanzi.js</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span></pre></td><td class=\"code\"><pre><span class=\"line\">_config.xml</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">2</span></pre></td><td class=\"code\"><pre><span class=\"line\">---------------------------------------------------------------------------------</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">3</span></pre></td><td class=\"code\"><pre><span class=\"line\">plugins: </span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">4</span></pre></td><td class=\"code\"><pre><span class=\"line\">    - position: sidebar</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">5</span></pre></td><td class=\"code\"><pre><span class=\"line\">      template: | </span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">6</span></pre></td><td class=\"code\"><pre><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">async</span> <span class=\"attr\">src</span>=<span class=\"string\">\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">7</span></pre></td><td class=\"code\"><pre><span class=\"line\">#   # Global Inject scripts/styles</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">8</span></pre></td><td class=\"code\"><pre><span class=\"line\">    - //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">9</span></pre></td><td class=\"code\"><pre><span class=\"line\"></span></pre></td></tr></table></div></figure>\n\n<p>在 _config.xml 文件里找到 footer 下的 custom，写入相关的HTML代码，如：</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span></pre></td><td class=\"code\"><pre><span class=\"line\">_config.xml</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">2</span></pre></td><td class=\"code\"><pre><span class=\"line\">---------------------------------------------------------------------------------</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">3</span></pre></td><td class=\"code\"><pre><span class=\"line\">footer:</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">4</span></pre></td><td class=\"code\"><pre><span class=\"line\"># Custom text.</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">5</span></pre></td><td class=\"code\"><pre><span class=\"line\">  # 于最后一行添加自定义内容</span></pre></td></tr><tr><td class=\"gutter\"><pre><span class=\"line\">6</span></pre></td><td class=\"code\"><pre><span class=\"line\">  custom: <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>= <span class=\"string\">\"busuanzi_container_site_uv\"</span> <span class=\"attr\">style</span> =<span class=\"string\">'display:none'</span>&gt;</span>Total <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_site_uv\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span> visitors. <span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_container_site_pv\"</span> <span class=\"attr\">style</span> = <span class=\"string\">'display:none'</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">\"busuanzi_value_site_pv\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span> Views<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span> </span></pre></td></tr></table></div></figure>\n\n<hr>\n<p>安装过程的问题：</p>\n<p>问题一：引用js的问题</p>\n<ul>\n<li>通过plugins模块中的Global Inject scripts/styles</li>\n</ul>\n<p>问题二：部署后，页面显示的访问量过大</p>\n<ul>\n<li>在本地是此有数据量过大问题，部署后就无当前问题</li>\n</ul>\n<p>附属链接：</p>\n<p><a href=\"https://removeif.github.io/theme/不蒜子统计常见问题.html\" target=\"_blank\" rel=\"noopener\">不蒜子统计常见问题</a></p>\n</blockquote>\n<p>  △ 设置about，search</p>\n<h6 id=\"改造过程中的问题：\">改造过程中的问题：<a href=\"2019/12/10/hexo-inside博客主题优化#改造过程中的问题：\"></a></h6><p>1、config.yml文件在部署过程中，存在问题：duplicated mapping key at line 242, column -2307: </p>\n<p>在search模块中，设置 其一 adapter即可，不可设置两个</p>\n<p>2、bad indentation of a mapping entry at line 330, column 3</p>\n<p>缩进错误</p>\n<p>3、无法加载Disqus</p>\n","prev":{"title":"闲潭杂记","link":"2019/12/29/闲潭杂记"},"next":{"title":"hexo_mac部署","link":"2019/12/10/hexo_mac部署"},"plink":"http://yoursite.com/2019/12/10/hexo-inside博客主题优化/","reward":true,"copyright":{"custom":"未经许可，不可转载！"}}