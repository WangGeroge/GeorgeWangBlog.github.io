{"title":"InstallAnywhere打包web单机版","date":"2020-01-03T07:37:30.000Z","date_formatted":{"ll":"2020年1月3日","L":"2020/01/03","MM-DD":"01-03"},"link":"2020/01/03/InstallAnywhere打包web单机版","comments":true,"tags":["web单机版"],"categories":["InstallAnyWhere"],"updated":"2020-08-17T06:55:07.709Z","content":"<h3 id=\"InstallAnywhere打包web\">InstallAnywhere打包web<a href=\"2020/01/03/InstallAnywhere打包web单机版#InstallAnywhere打包web\"></a></h3><p><code>InstallAnywhere,web</code></p>\n<hr>\n<h5 id=\"一、准备工作\">一、准备工作<a href=\"2020/01/03/InstallAnywhere打包web单机版#一、准备工作\"></a></h5><p>1、下载InstallAnywhere2020，并安装</p>\n<ul>\n<li><p>① 注册，下载地址：<a href=\"https://resources.flexera.com/web/www/landing/eval-download-installanywhere.html?id=IA-PRE（21天试用期）\" target=\"_blank\" rel=\"noopener\">https://resources.flexera.com/web/www/landing/eval-download-installanywhere.html?id=IA-PRE（21天试用期）</a></p>\n</li>\n<li><p>② 安装</p>\n</li>\n</ul>\n<p>2、下载JDK1.8，并安装</p>\n<p>3、下载MySQL8 免安装</p>\n<p>4、下载Tomcat8.5 免安装</p>\n<p>5、本地创建文件夹，将当前的jdk，mysql，Tomcat复制到当前文件夹中</p>\n<h5 id=\"二、创建Project\">二、创建Project<a href=\"2020/01/03/InstallAnywhere打包web单机版#二、创建Project\"></a></h5><p>※ 打开InstallAnywhere 2020，建立Basic Project Template，选择Advanced Designer,设置Title，Name等</p>\n<ol>\n<li><p>Project – info ：填写安装程序标题，安装文件名称，产品名称，其他项目可不填写。</p>\n</li>\n<li><p>Project – Description：填写产品描述、开发商、开发商主页、邮件等。</p>\n</li>\n<li><p>Installer UI – Look&amp;Feel：自定义安装界面、标题、标题颜色等。</p>\n</li>\n<li><p>Organization：组织机构信息，尚未研究。</p>\n</li>\n<li><p>Pre – install ：安装前准备，可以自定义安装步骤，修改各个步骤的标题及内容。</p>\n</li>\n<li><p>Install ：至关重要的一步，首先准备好你要打包的文件（tomcat免安装版、mysql免安装版、jdk）</p>\n</li>\n</ol>\n<p>※ 设置本地语言</p>\n<ul>\n<li>Project -&gt; Locales -&gt; 选择需要的本地化语言</li>\n</ul>\n<h5 id=\"三、设置环境变量\">三、设置环境变量<a href=\"2020/01/03/InstallAnywhere打包web单机版#三、设置环境变量\"></a></h5><p>Install -&gt;，按钮Add Action…&gt;Set System Environment Variable&gt;Add &gt;，</p>\n<p>设置JAVA_HOME和CATALINA_HOME,CATALINA_DIR,PATH 四个系统环境变量。其中<code>$USER_INSTALL_DIR$</code>表示用户选择的安装路径。</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">JAVA_HOME  <span class=\"token variable\">$USER_INSTALL_DIR</span>$\\jdk1.8\nCATALINA_HOME <span class=\"token variable\">$USER_INSTALL_DIR</span>$\\tomcat8.5\nCATALINA_DIR <span class=\"token variable\">$USER_INSTALL_DIR</span>$\\tomcat8.5\\bin\nPATH  <span class=\"token variable\">$USER_INSTALL_DIR</span>$\\jdk1.8\\bin<span class=\"token punctuation\">;</span><span class=\"token variable\">$USER_INSTALL_DIR</span>$\\mysql8\\bin<span class=\"token punctuation\">;</span><span class=\"token variable\">$USER_INSTALL_DIR</span>$\\tomcat8.5\\bin<span class=\"token punctuation\">;</span>\nC:\\Windows\\System32 </code></pre>\n<p>将jdk,tomcat,mysql 通过按钮Add Files…添加进来放在 User Install Folder直接目录下</p>\n<h5 id=\"四、注册服务\">四、注册服务<a href=\"2020/01/03/InstallAnywhere打包web单机版#四、注册服务\"></a></h5><p>1、安装免安装mysql</p>\n<ul>\n<li><p>在本地下载完成mysql后，解压，进行初始化处理，并创建数据库以及对应的表</p>\n<ul>\n<li>初始化mysql</li>\n<li>修改mysql登录密码</li>\n<li>创建数据库</li>\n<li>创建表</li>\n</ul>\n<blockquote>\n<ul>\n<li><p>当前解压版mysql无data文件夹(存放数据的文件夹，无或者内容不对会启动不成功)，无my.ini文件</p>\n</li>\n<li><p>通过创建my.ini文件</p>\n<pre class=\" language-ini\"><code class=\"language-ini\"><span class=\"token selector\">[mysqld]</span>\n# 设置3306端口\n<span class=\"token constant\">port</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>3306</span>\n# 设置mysql的安装目录\n<span class=\"token constant\">basedir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span> D:\\ProjectJKTY-2017\\mysql8.0</span>\n# 设置mysql数据库的数据的存放目录\n<span class=\"token constant\">datadir</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span> D:\\ProjectJKTY-2017\\mysql8.0\\data</span>\n# 允许最大连接数\n<span class=\"token constant\">max_connections</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>200</span>\n# 允许连接失败的次数。这是为了防止有人从该主机试图攻击数据库系统\n<span class=\"token constant\">max_connect_errors</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>10</span>\n# 服务端使用的字符集默认为UTF8\n<span class=\"token constant\">character-set-server</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>utf8</span>\n# 创建新表时将使用的默认存储引擎\n<span class=\"token constant\">default-storage-engine</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>INNODB</span>\n# 默认使用“mysql_native_password”插件认证\n<span class=\"token constant\">default_authentication_plugin</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>mysql_native_password</span>\n<span class=\"token selector\">[mysql]</span>\n# 设置mysql客户端默认字符集\n<span class=\"token constant\">default-character-set</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>utf8</span>\n<span class=\"token selector\">[client]</span>\n# 设置mysql客户端连接服务端时默认使用的端口\n<span class=\"token constant\">port</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>3306</span>\n<span class=\"token constant\">default-character-set</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span>utf8</span></code></pre>\n</li>\n<li><p>通过进入mysql路径下，执行 <code>mysqld --initialize</code> 生成data文件夹及其相关内容</p>\n</li>\n<li><p>执行mysql的服务安装 ： <code>mysqld --install</code></p>\n</li>\n<li><p>执行启动mysql操作 ： `net start mysql ``</p>\n<ul>\n<li><p>注：第一次登陆MYSQL时，会提示要求输入初始密码，这是考虑安全因素，命令：</p>\n<p><code>mysqld --initialize</code>会随机生成密码。</p>\n</li>\n<li><p>初始密码在data文件夹下的xxx.err文件中，可以用记事本打开，用ctrl+f 查找功能找到如下一行记录：</p>\n<p>[Note] A temporary password is generated for root@localhost: NZ+uhXPq1zN.</p>\n<p>其中NZ+uhXPq1zN.即为初始密码（注意.号不要漏了）</p>\n<p>进入后可以用如下命令修改，这里密码改为root：</p>\n</li>\n</ul>\n</li>\n<li><pre class=\" language-mysql\"><code class=\"language-mysql\">ALTER USER 'root'@'localhost' IDENTIFIED BY 'RootXXX';</code></pre>\n</li>\n<li><p>进行mysql的数据库，数据库数据导入操作（按照installAnywhere中的mysql安装步骤走）</p>\n<ul>\n<li><p>创建mysql数据库</p>\n<pre class=\" language-mysql\"><code class=\"language-mysql\">mysql8\\bin\\mysql -uroot -pRootXXX< \\mysql8\\create.sql</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><p>将已有数据库数据导入到mysql数据库中</p>\n<pre class=\" language-mysql\"><code class=\"language-mysql\">mysql8\\bin\\mysql -hlocalhost  -uroot -pRootXXX pcmdb < \\mysql8\\testJkty.sql\n\nmysql8\\bin\\mysql -hlocalhost  -uroot -pRootXXX pcmdb < \\mysql8\\jktyView.sql</code></pre>\n</li>\n</ul>\n</blockquote>\n</li>\n<li><p>添加按钮Add Action…&gt;Motify Text File-Single File&gt;Add&gt;,然后在Installed file选中mysql安装目录下的my.in(如果没有这个文件，请先创建这样一个文件，内容为空),其中Additional Text选中第一个prepend,在文本框中输入:</p>\n</li>\n</ul>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span>\nbasedir <span class=\"token operator\">=</span> <span class=\"token variable\">$USER_INSTALL_DIR</span>$\\mysql8\ndatadir <span class=\"token operator\">=</span> <span class=\"token variable\">$USER_INSTALL_DIR</span>$\\mysql8\\data\ndefault-character-set <span class=\"token operator\">=</span> utf8\nset-variable<span class=\"token operator\">=</span>max_connections<span class=\"token operator\">=</span>1000\n<span class=\"token punctuation\">[</span>WinMySQLAdmin<span class=\"token punctuation\">]</span>\nServer<span class=\"token operator\">=</span><span class=\"token variable\">$USER_INSTALL_DIR</span>$\\mysql5.0\\bin\\mysqld-nt.exe\nuser<span class=\"token operator\">=</span>root\n<span class=\"token punctuation\">[</span>client<span class=\"token punctuation\">]</span>\nport<span class=\"token operator\">=</span>3306\nuser<span class=\"token operator\">=</span>root\n</code></pre>\n<p>将该Motify Text File-Single File移动到Panel: Install Complete后面。</p>\n<p>2、注册mysql服务：</p>\n<ul>\n<li><p>在Post-install中，addAction 选择”Execute Script/Batch file” 在Comment中取名为”注册MySQL服务”，在Script中写入</p>\n<pre class=\" language-bash\"><code class=\"language-bash\">Call <span class=\"token string\">\"<span class=\"token variable\">$USER_INSTALL_DIR</span>$/mysql8/bin/mysqld\"</span> -remove   \nCall <span class=\"token string\">\"<span class=\"token variable\">$USER_INSTALL_DIR</span>$/mysql8/bin/mysqld\"</span> -install  </code></pre>\n</li>\n</ul>\n<p>3、启动mysql：</p>\n<ul>\n<li>在Post-install中，addAction 选择”Execute Script/Batch file” 在Comment中取名为”启动MySQL”，在Script中写入</li>\n</ul>\n<pre class=\" language-bash\"><code class=\"language-bash\">net start mysql</code></pre>\n<p>4、启动Tomcat</p>\n<ul>\n<li>在Post-install中，addAction 选择”Execute Script/Batch file” 在Comment中取名为”启动Tomcat”，在Script中写入</li>\n</ul>\n<pre class=\" language-bash\"><code class=\"language-bash\"><span class=\"token variable\">$USER_INSTALL_DIR</span>$/tomcat8.5/bin/startup.bat</code></pre>\n<p>5、complete</p>\n<p>相关安装action：</p>\n<p><img src=\"/2020/01/03/InstallAnywhere%E6%89%93%E5%8C%85web%E5%8D%95%E6%9C%BA%E7%89%88/installAnywhere%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B.png\" alt=\"installAnywhere安装过程\" class=\"article-img\"></p>\n<h5 id=\"相关安装问题汇总：\">相关安装问题汇总：<a href=\"2020/01/03/InstallAnywhere打包web单机版#相关安装问题汇总：\"></a></h5><p>① mysql服务无法安装，无法启动相关服务</p>\n<ul>\n<li>win10 彻底删除mysql</li>\n</ul>\n<pre class=\" language-bash\"><code class=\"language-bash\">1. 停止MySQL服务\n　　开始 -<span class=\"token operator\">></span> 所有应用 -<span class=\"token operator\">></span> Windows管理工具 -<span class=\"token operator\">></span> 服务，将MySQL服务停止。\n2. 卸载mysql server\n　　控制面板\\所有控制面板项\\程序和功能，将mysql server卸载掉。\n3. 将MySQL安装目录下的MySQL文件夹删除（我的安装目录是C:\\Program Files <span class=\"token punctuation\">(</span>x86<span class=\"token punctuation\">)</span>\\MySQL）\n4. 运行“regedit”文件，打开注册表。\n　　删除<span class=\"token variable\"><span class=\"token variable\">`</span>HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Services\\Eventlog\\Application\\MySQL<span class=\"token variable\">`</span></span>文件夹\n　　删除<span class=\"token variable\"><span class=\"token variable\">`</span>HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet002\\Services\\Eventlog\\Application\\MySQL<span class=\"token variable\">`</span></span>文件夹。\n　　删除<span class=\"token variable\"><span class=\"token variable\">`</span>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Eventlog\\Application\\MySQL<span class=\"token variable\">`</span></span>的文件夹。\n　　如果没有相应的文件夹，就不用删除了。\n5. 删除C盘下的“C:\\ProgramData\\MySQL ”文件夹，如果删除不了则用360粉碎掉即可，\n　　该programData文件默认是隐藏的，设置显示后即可见，或者直接复制 C:\\ProgramData 到地址栏回车即可进入！将整个MySQL文件夹删除掉。。。\n6. 开始 -<span class=\"token operator\">></span> 所有应用 -<span class=\"token operator\">></span> Windows管理工具 -<span class=\"token operator\">></span> 服务\n　　如果已经将MySQL卸载，但通过“开始 -<span class=\"token operator\">></span> 所有应用 -<span class=\"token operator\">></span> Windows管理工具 -<span class=\"token operator\">></span> 服务”查看到MySQL服务仍然残留在系统服务里。又不想改服务名，改怎么办呢。只要在CMD里输入一条命令就可以将服务删除：\n　　sc delete mysql //这里的mysql是你要删除的服务名, 这样一来服务就被删除了。\n\n重装MySQL数据库了！！！</code></pre>\n<p>② dsName(JNDI):jdbc/cplhERROR! null</p>\n<ul>\n<li>在Context.xml 中配置 数据库相关信息，server.xml中不做数据库的配置</li>\n</ul>\n<p><img src=\"/2020/01/03/InstallAnywhere%E6%89%93%E5%8C%85web%E5%8D%95%E6%9C%BA%E7%89%88/contentXML%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF.png\" alt=\"contentXML配置信息\" class=\"article-img\"></p>\n<p><img src=\"/2020/01/03/InstallAnywhere%E6%89%93%E5%8C%85web%E5%8D%95%E6%9C%BA%E7%89%88/serverXML%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF.png\" alt=\"serverXML配置信息\" class=\"article-img\"></p>\n<p>③  在mysql命令行下执行sql文件</p>\n<p> <a href=\"https://blog.csdn.net/qq_36501591/article/details/80354924\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/qq_36501591/article/details/80354924</a></p>\n<h5 id=\"指导材料：\">指导材料：<a href=\"2020/01/03/InstallAnywhere打包web单机版#指导材料：\"></a></h5><ul>\n<li><a href=\"https://blog.csdn.net/number_89757/article/details/80643865\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/number_89757/article/details/80643865</a></li>\n<li><a href=\"https://www.cnblogs.com/martin-roger/p/5912271.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/martin-roger/p/5912271.html</a></li>\n<li><a href=\"https://www.cnblogs.com/S-E-P/archive/2010/01/10/2045078.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/S-E-P/archive/2010/01/10/2045078.html</a></li>\n<li><a href=\"https://blog.csdn.net/ljz2009y/article/details/7707237\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/ljz2009y/article/details/7707237</a></li>\n<li><a href=\"https://blog.csdn.net/y19910825/article/details/53740045\" target=\"_blank\" rel=\"noopener\">https://blog.csdn.net/y19910825/article/details/53740045</a></li>\n<li><a href=\"https://wenku.baidu.com/view/db30494233d4b14e8424684d.html\" target=\"_blank\" rel=\"noopener\">https://wenku.baidu.com/view/db30494233d4b14e8424684d.html</a></li>\n<li><a href=\"https://www.taodocs.com/p-301026194.html\" target=\"_blank\" rel=\"noopener\">https://www.taodocs.com/p-301026194.html</a></li>\n</ul>\n","prev":{"title":"知识杂记","link":"2020/08/03/知识杂记"},"next":{"title":"闲潭杂记","link":"2019/12/29/闲潭杂记"},"plink":"http://82u0q0.coding-pages.com/2020/01/03/InstallAnywhere打包web单机版/","reward":true,"copyright":{"custom":"未经许可，不可转载！"}}